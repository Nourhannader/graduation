<div class="registration-container">
  <div class="registration-card">
    <div class="registration-form-container">
      <form [formGroup]="registerForm" (ngSubmit)="Register()" enctype="multipart/form-data" class="registration-form">
        <div class="form-header">
          <div class="role-selection">
            <div class="role-toggle">
              <input
                type="radio"
                id="owner"
                value="Owner"
                (change)="updateRole('Owner')"
                [checked]="selectedRole === 'Owner'"
              />
              <label for="owner">Owner</label>
              <input
                type="radio"
                id="renter"
                value="Renter"
                (change)="updateRole('Renter')"
                [checked]="selectedRole === 'Renter'"
              />
              <label for="renter">Renter</label>
            </div>
          </div>
          <h2 class="form-title">Register as a {{ selectedRole }}</h2>
        </div>

        <div class="form-columns">
          <div class="form-column">
            <div class="form-group">
              <input
                type="text"
                formControlName="firstName"
                placeholder="First Name"
                class="form-control"
              />
              @if(firstName?.errors && firstName?.touched){
                <div class="error-message">
                  @if(firstName?.hasError('required')){
                    First Name is required
                  }@else if(firstName?.hasError('minlength')){
                    Min Length is 3
                  }@else if(firstName?.hasError('maxlength')){
                    Max Length is 20
                  }@else if(firstName?.hasError('pattern')){
                    First Name is alphabet letters only
                  }
                </div>
              }
            </div>

            <div class="form-group">
              <input
                type="text"
                formControlName="lastName"
                placeholder="Last Name"
                class="form-control"
              />
              @if(lastName?.errors && lastName?.touched){
                <div class="error-message">
                  @if(lastName?.hasError('required')){
                    Last Name is required
                  }@else if(lastName?.hasError('minlength')){
                    Min Length is 3
                  }@else if(lastName?.hasError('maxlength')){
                    Max Length is 20
                  }@else if(lastName?.hasError('pattern')){
                    Last Name is alphabet letters only
                  }
                </div>
              }
            </div>

            <div class="form-group">
              <input
                type="text"
                formControlName="userName"
                placeholder="User Name"
                class="form-control"
              />
              @if(userName?.errors && userName?.touched){
                <div class="error-message">
                  @if(userName?.hasError('required')){
                    User Name is required
                  }@else if(userName?.hasError('minlength')){
                    Min Length is 3
                  }@else if(userName?.hasError('maxlength')){
                    Max Length is 20
                  }@else if(userName?.hasError('pattern')){
                    User Name is alphabet letters and numbers and special characters
                  }
                </div>
              }
            </div>

            <div class="form-group">
              <input
                type="text"
                formControlName="phone"
                placeholder="Phone Number"
                class="form-control"
              />
              @if(phone?.errors && phone?.touched){
                <div class="error-message">
                  Phone format: 01xxxxxxxxx
                </div>
              }
            </div>
          </div>

          <div class="form-column">
            <div class="form-group">
              <input
                type="text"
                formControlName="email"
                placeholder="Email"
                class="form-control"
              />
              @if(email?.errors && email?.touched){
                <div class="error-message">
                  @if(email?.hasError('required')){
                    Email is required
                  }@else if(email?.hasError('email')){
                    Email invalid
                  }
                </div>
              }
            </div>

            <div class="form-group password-group">
              <input
                [type]="showPassword ? 'text' : 'password'"
                formControlName="password"
                placeholder="Password"
                class="form-control"
              />
              <i
                (click)="togglePassword()"
                [class]="'bi ' + (showPassword ? 'bi-eye-fill' : 'bi-eye-slash-fill')"
                class="password-toggle"
              ></i>
              @if(password?.errors && password?.touched){
                <div class="error-message">
                  @if(password?.hasError('required')){
                    Password is required
                  }@else if(password?.hasError('pattern')){
                    Password must be at least 8 characters long, include uppercase, lowercase, number, and special character.
                  }
                </div>
              }
            </div>

            <div class="form-group password-group">
              <input
                [type]="showConfirmPassword ? 'text' : 'password'"
                formControlName="confirmPassword"
                placeholder="Confirm Password"
                class="form-control"
              />
              <i
                (click)="toggleConfirmPassword()"
                [class]="'bi ' + (showConfirmPassword ? 'bi-eye-fill' : 'bi-eye-slash-fill')"
                class="password-toggle"
              ></i>
              @if(confirmPassword?.errors && confirmPassword?.touched){
                <div class="error-message">
                  @if(confirmPassword?.hasError('required')){
                    Confirm Password is required
                  }@else if(confirmPassword?.hasError('misMatch')){
                    Passwords don't match
                  }
                </div>
              }
            </div>

            <div class="form-group file-upload-group">
              <label class="file-upload-label">
                <span>Upload Profile Image</span>
                <input
                  type="file"
                  id="file-input"
                  (change)="updateFileName($event)"
                  accept=".jpg,.jpeg,.png,.gif,.webp"
                />

              </label>
              <div class="file-name">{{ fileName || 'No file selected' }}</div>

            </div>
          </div>
        </div>

        <div class="form-actions">
          @if(apiError){
            <div class="api-error">
              {{ apiError }}
            </div>
          }
          <button type="submit" class="submit-button">
            Register
          </button>
        </div>
      </form>
    </div>

    <div class="registration-sidebar">
  <div class="sidebar-image-container">
    <img src="images/reg1.png" alt="Registration" class="sidebar-image">
  </div>

  <div class="sidebar-description">
    <p>Your smart way to rent in compounds.Register and find your perfect apartment today</p>
  </div>

  <button class="login-button" (click)="Login()">
    Login
  </button>
</div>

  </div>
</div>
